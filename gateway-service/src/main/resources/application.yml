server:
  port: 19091

spring:
  main:
    web-application-type: reactive
  application:
    name: gateway-service
  cloud:
    # 👇 gateway 설정은 모두 이 아래에 일관되게 위치해야 합니다.
    gateway:
      default-filters:
        - AuthenticationFilter
      server:
        webflux:
          # 👇 라우팅 관련 설정은 모두 여기로 이동
          routes:
            - id: auth-service
              uri: lb://auth-service
              predicates:
                - Path=/oauth2/**
            - id: chat-service
              uri: lb:ws://chat-service
              predicates:
                - Path=/chat/**
          # 👇 discovery locator의 새 위치
          discovery:
            locator:
              enabled: true
    # 👇 loadbalancer는 cloud 레벨에 위치
    loadbalancer:
      cache:
        enabled: false

# Eureka 클라이언트 설정
eureka:
  client:
    register-with-eureka: true
    fetch-registry: true
    service-url:
      defaultZone: ${EUREKA_URL}

# JWT 관련 커스텀 설정
jwt:
  secretKey: ${JWT_KEY}

logging:
  level:
    org.springframework.cloud.gateway: DEBUG
    org.springframework.web.reactive: DEBUG
    reactor.netty: DEBUG