server:
  port: 19091

spring:
  main:
    web-application-type: reactive
  application:
    name: gateway-service
  cloud:
    gateway:
      globalcors:
        add-to-simple-url-handler-mapping: true
        corsConfigurations:
          '[/**]':
            allowedOrigins:
              - http://127.0.0.1:5500
            allowedMethods: [ GET, POST, OPTIONS ]
            allowedHeaders: [ Authorization, Content-Type ]
            allowCredentials: true
            maxAge: 3600
        default-filters:
          - DedupeResponseHeader=Access-Control-Allow-Credentials Access-Control-Allow-Origin
      default-filters:
        - AuthenticationFilter
      server:
        webflux:
          # 라우팅 관련 설정은 모두 여기로 이동
          routes:
            - id: auth-service
              uri: lb://auth-service
              predicates:
                - Path=/oauth2/**
            - id: chat-service
              uri: lb:http://chat-service # "ws:" 까지 커버됨
              predicates:
                - Path=/chat/**
          discovery:
            locator:
              enabled: true
    loadbalancer:
      cache:
        enabled: false

eureka:
  client:
    register-with-eureka: true
    fetch-registry: true
    service-url:
      defaultZone: ${EUREKA_URL}


jwt:
  secretKey: ${JWT_KEY}

logging:
  level:
    org.springframework.cloud.gateway: DEBUG
    org.springframework.web.reactive: DEBUG
    reactor.netty: DEBUG